<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω Danh m·ª•c - Admin Dashboard</title>

    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Dashboard CSS (chung) -->
    <link rel="stylesheet" th:href="@{/css/Dashboard.css}" />
    <!-- Categories CSS (ri√™ng) -->
    <link rel="stylesheet" th:href="@{/css/Categories.css}" />
</head>
<body>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-brand">
        <i class="bi bi-shop-window"></i>
        <span class="sidebar-brand-text">E-Commerce</span>
    </div>

    <div class="sidebar-menu">
        <div class="menu-section-title">Main</div>

        <!-- Dashboard -->
        <a href="/admin/dashboard" class="menu-item">
            <i class="bi bi-grid-fill"></i>
            <span>Dashboard</span>
        </a>

        <div class="menu-section-title">Qu·∫£n l√Ω</div>

        <!-- Qu·∫£n l√Ω s·∫£n ph·∫©m -->
        <div>
            <div class="menu-item open active" onclick="toggleSubmenu(this)">
                <i class="bi bi-box-seam-fill"></i>
                <span>S·∫£n ph·∫©m</span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <div class="submenu show">
                <a href="/admin/products" class="submenu-item">Danh s√°ch s·∫£n ph·∫©m</a>
                <a href="/admin/products/add" class="submenu-item">Th√™m s·∫£n ph·∫©m</a>
                <a href="/admin/categories" class="submenu-item active">Danh m·ª•c</a>
                <a href="/admin/brands" class="submenu-item">Th∆∞∆°ng hi·ªáu</a>
                <a href="/admin/attributes" class="submenu-item">Thu·ªôc t√≠nh</a>
                <a href="/admin/products/import" class="submenu-item">Import/Export</a>
            </div>
        </div>

        <!-- Qu·∫£n l√Ω t·ªìn kho -->
        <div>
            <div class="menu-item" onclick="toggleSubmenu(this)">
                <i class="bi bi-boxes"></i>
                <span>T·ªìn kho</span>
                <span class="badge bg-warning">12</span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <div class="submenu">
                <a href="/admin/inventory" class="submenu-item">Qu·∫£n l√Ω kho</a>
                <a href="/admin/inventory/warehouses" class="submenu-item">Kho h√†ng</a>
                <a href="/admin/inventory/stock-in" class="submenu-item">Nh·∫≠p kho</a>
                <a href="/admin/inventory/stock-out" class="submenu-item">Xu·∫•t kho</a>
                <a href="/admin/inventory/transfer" class="submenu-item">ƒêi·ªÅu chuy·ªÉn</a>
                <a href="/admin/inventory/alerts" class="submenu-item">
                    C·∫£nh b√°o t·ªìn kho
                    <span class="badge bg-danger ms-auto">12</span>
                </a>
            </div>
        </div>

        <!-- Qu·∫£n l√Ω ƒë∆°n h√†ng -->
        <div>
            <div class="menu-item" onclick="toggleSubmenu(this)">
                <i class="bi bi-cart-check-fill"></i>
                <span>ƒê∆°n h√†ng</span>
                <span class="badge bg-danger">5</span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <div class="submenu">
                <a href="/admin/orders" class="submenu-item">Danh s√°ch ƒë∆°n h√†ng</a>
                <a href="/admin/orders/pending" class="submenu-item">
                    Ch·ªù x·ª≠ l√Ω
                    <span class="badge bg-warning text-dark ms-auto">5</span>
                </a>
                <a href="/admin/orders/processing" class="submenu-item">ƒêang x·ª≠ l√Ω</a>
                <a href="/admin/orders/shipped" class="submenu-item">ƒêang giao</a>
                <a href="/admin/orders/refunds" class="submenu-item">Ho√†n tr·∫£</a>
            </div>
        </div>

        <!-- Qu·∫£n l√Ω kh√°ch h√†ng -->
        <div>
            <div class="menu-item" onclick="toggleSubmenu(this)">
                <i class="bi bi-people-fill"></i>
                <span>Kh√°ch h√†ng</span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <div class="submenu">
                <a href="/admin/customers" class="submenu-item">Danh s√°ch kh√°ch h√†ng</a>
                <a href="/admin/customers/groups" class="submenu-item">Nh√≥m kh√°ch h√†ng</a>
                <a href="/admin/customers/reviews" class="submenu-item">ƒê√°nh gi√°</a>
                <a href="/admin/users/roles" class="submenu-item">Ph√¢n quy·ªÅn</a>
            </div>
        </div>

        <div class="menu-section-title">Marketing & Content</div>

        <!-- Marketing -->
        <div>
            <div class="menu-item" onclick="toggleSubmenu(this)">
                <i class="bi bi-megaphone-fill"></i>
                <span>Marketing</span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <div class="submenu">
                <a href="/admin/promotions" class="submenu-item">Khuy·∫øn m√£i</a>
                <a href="/admin/coupons" class="submenu-item">M√£ gi·∫£m gi√°</a>
                <a href="/admin/campaigns" class="submenu-item">Chi·∫øn d·ªãch</a>
                <a href="/admin/emails" class="submenu-item">Email Marketing</a>
            </div>
        </div>

        <!-- CMS -->
        <div>
            <div class="menu-item" onclick="toggleSubmenu(this)">
                <i class="bi bi-file-earmark-text-fill"></i>
                <span>N·ªôi dung</span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <div class="submenu">
                <a href="/admin/pages" class="submenu-item">Trang tƒ©nh</a>
                <a href="/admin/blog" class="submenu-item">Blog/Tin t·ª©c</a>
                <a href="/admin/banners" class="submenu-item">Banner & Slider</a>
                <a href="/admin/seo" class="submenu-item">SEO</a>
            </div>
        </div>

        <!-- Ph·∫£n h·ªìi & ƒê√°nh gi√° -->
        <a href="/admin/reviews" class="menu-item">
            <i class="bi bi-star-fill"></i>
            <span>Ph·∫£n h·ªìi & ƒê√°nh gi√°</span>
            <span class="badge bg-info">8</span>
        </a>

        <div class="menu-section-title">Analytics</div>

        <!-- B√°o c√°o -->
        <div>
            <div class="menu-item" onclick="toggleSubmenu(this)">
                <i class="bi bi-graph-up-arrow"></i>
                <span>B√°o c√°o</span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <div class="submenu">
                <a href="/admin/reports/sales" class="submenu-item">Doanh thu</a>
                <a href="/admin/reports/products" class="submenu-item">S·∫£n ph·∫©m</a>
                <a href="/admin/reports/customers" class="submenu-item">Kh√°ch h√†ng</a>
                <a href="/admin/reports/inventory" class="submenu-item">T·ªìn kho</a>
                <a href="/admin/reports/export" class="submenu-item">Export b√°o c√°o</a>
            </div>
        </div>

        <div class="menu-section-title">System</div>

        <!-- C√†i ƒë·∫∑t -->
        <div>
            <div class="menu-item" onclick="toggleSubmenu(this)">
                <i class="bi bi-gear-fill"></i>
                <span>C√†i ƒë·∫∑t</span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <div class="submenu">
                <a href="/admin/settings/general" class="submenu-item">C√†i ƒë·∫∑t chung</a>
                <a href="/admin/settings/shipping" class="submenu-item">V·∫≠n chuy·ªÉn</a>
                <a href="/admin/settings/payment" class="submenu-item">Thanh to√°n</a>
                <a href="/admin/settings/email" class="submenu-item">Email SMTP</a>
                <a href="/admin/settings/users" class="submenu-item">Qu·∫£n tr·ªã vi√™n</a>
                <a href="/admin/settings/audit-logs" class="submenu-item">Audit Logs</a>
            </div>
        </div>

        <!-- 2FA Security -->
        <a href="/admin/2fa" class="menu-item">
            <i class="bi bi-shield-check"></i>
            <span>X√°c th·ª±c 2FA</span>
        </a>
    </div>
</div>

<!-- Main Content -->
<div class="main-content">
    <!-- Topbar -->
    <div class="topbar">
        <div class="topbar-left">
            <button class="mobile-menu-btn" onclick="toggleSidebar()">
                <i class="bi bi-list"></i>
            </button>
            <div>
                <h1 class="page-title">Qu·∫£n l√Ω Danh m·ª•c</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/admin">Trang ch·ªß</a></li>
                        <li class="breadcrumb-item"><a href="/admin/products">S·∫£n ph·∫©m</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Danh m·ª•c</li>
                    </ol>
                </nav>
            </div>
        </div>

        <div class="topbar-right">
            <!-- Search -->
            <div class="search-box">
                <i class="bi bi-search"></i>
                <input type="text" class="form-control" placeholder="T√¨m ki·∫øm danh m·ª•c...">
            </div>

            <!-- Notifications -->
            <div class="dropdown">
                <div class="topbar-icon" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-bell-fill"></i>
                    <span class="badge bg-danger">5</span>
                </div>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li class="px-3 py-2"><strong>Th√¥ng b√°o</strong></li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="bi bi-cart-check text-success"></i>
                            <span>3 ƒë∆°n h√†ng m·ªõi</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="bi bi-exclamation-triangle text-warning"></i>
                            <span>12 s·∫£n ph·∫©m s·∫Øp h·∫øt</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="bi bi-star text-info"></i>
                            <span>8 ƒë√°nh gi√° m·ªõi</span>
                        </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-center" href="#">Xem t·∫•t c·∫£</a></li>
                </ul>
            </div>

            <!-- Messages -->
            <div class="dropdown">
                <div class="topbar-icon" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-chat-dots-fill"></i>
                    <span class="badge bg-success">2</span>
                </div>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li class="px-3 py-2"><strong>Tin nh·∫Øn</strong></li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="bi bi-person-circle"></i>
                            <span>Kh√°ch h√†ng y√™u c·∫ßu h·ªó tr·ª£</span>
                        </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-center" href="#">Xem t·∫•t c·∫£</a></li>
                </ul>
            </div>

            <!-- User Menu -->
            <div class="dropdown">
                <div class="user-menu" data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="user-avatar">
                        <span th:text="${#authentication.name?.substring(0,1)?.toUpperCase()}">N</span>
                    </div>
                    <div class="user-info">
                        <div class="user-name" th:text="${#authentication.name}">NvkhoaDev54</div>
                        <div sec:authorize="isAuthenticated()">
                            <span sec:authentication="authorities"></span>
                        </div>
                    </div>
                    <i class="bi bi-chevron-down"></i>
                </div>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                        <a class="dropdown-item" href="/admin/profile">
                            <i class="bi bi-person"></i>
                            <span>H·ªì s∆° c·ªßa t√¥i</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="/admin/settings">
                            <i class="bi bi-gear"></i>
                            <span>C√†i ƒë·∫∑t</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="/admin/activity-log">
                            <i class="bi bi-clock-history"></i>
                            <span>Nh·∫≠t k√Ω ho·∫°t ƒë·ªông</span>
                        </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <form th:action="@{/logout}" method="post">
                            <button type="submit" class="dropdown-item">
                                <i class="bi bi-box-arrow-right"></i>
                                <span>ƒêƒÉng xu·∫•t</span>
                            </button>
                        </form>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Content Area -->
    <div class="content-area">
        <div class="row g-4">
            <!-- Left Column - Category Tree -->
            <div class="col-lg-8">
                <div class="custom-table fade-in-up">
                    <div class="table-header">
                        <h5 class="table-title">
                            <i class="bi bi-folder-fill"></i>
                            C√¢y danh m·ª•c
                        </h5>
                        <div class="table-actions">
                            <button class="btn btn-sm btn-outline-primary" onclick="expandAll()">
                                <i class="bi bi-arrows-expand"></i> M·ªü r·ªông t·∫•t c·∫£
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="collapseAll()">
                                <i class="bi bi-arrows-collapse"></i> Thu g·ªçn
                            </button>
                            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#categoryModal">
                                <i class="bi bi-plus-lg"></i> Th√™m danh m·ª•c
                            </button>
                        </div>
                    </div>

                    <div class="category-tree">
                        <!-- Category Item Template -->
                        <div class="category-item" data-category-id="1">
                            <div class="category-content">
                                <button class="category-toggle" onclick="toggleCategory(this)">
                                    <i class="bi bi-chevron-right"></i>
                                </button>
                                <div class="category-icon">
                                    <i class="bi bi-phone-fill"></i>
                                </div>
                                <div class="category-info">
                                    <div class="category-name">ƒêi·ªán tho·∫°i & Ph·ª• ki·ªán</div>
                                    <div class="category-meta">
                                        <span class="badge bg-primary">245 s·∫£n ph·∫©m</span>
                                        <span class="badge bg-success">Hi·ªÉn th·ªã</span>
                                    </div>
                                </div>
                                <div class="category-actions">
                                    <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(1)" title="Th√™m danh m·ª•c con">
                                        <i class="bi bi-plus-circle"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success" onclick="editCategory(1)" title="S·ª≠a">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(1)" title="X√≥a">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Sub Categories -->
                            <div class="category-children">
                                <div class="category-item" data-category-id="2">
                                    <div class="category-content">
                                        <button class="category-toggle" onclick="toggleCategory(this)">
                                            <i class="bi bi-chevron-right"></i>
                                        </button>
                                        <div class="category-icon">
                                            <i class="bi bi-apple"></i>
                                        </div>
                                        <div class="category-info">
                                            <div class="category-name">iPhone</div>
                                            <div class="category-meta">
                                                <span class="badge bg-primary">89 s·∫£n ph·∫©m</span>
                                                <span class="badge bg-success">Hi·ªÉn th·ªã</span>
                                            </div>
                                        </div>
                                        <div class="category-actions">
                                            <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(2)" title="Th√™m danh m·ª•c con">
                                                <i class="bi bi-plus-circle"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-success" onclick="editCategory(2)" title="S·ª≠a">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(2)" title="X√≥a">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="category-children">
                                        <div class="category-item" data-category-id="3">
                                            <div class="category-content">
                                                <span class="category-toggle invisible"></span>
                                                <div class="category-icon">
                                                    <i class="bi bi-tag"></i>
                                                </div>
                                                <div class="category-info">
                                                    <div class="category-name">iPhone 15 Series</div>
                                                    <div class="category-meta">
                                                        <span class="badge bg-primary">42 s·∫£n ph·∫©m</span>
                                                        <span class="badge bg-success">Hi·ªÉn th·ªã</span>
                                                    </div>
                                                </div>
                                                <div class="category-actions">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(3)" title="Th√™m danh m·ª•c con">
                                                        <i class="bi bi-plus-circle"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-success" onclick="editCategory(3)" title="S·ª≠a">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(3)" title="X√≥a">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="category-item" data-category-id="4">
                                            <div class="category-content">
                                                <span class="category-toggle invisible"></span>
                                                <div class="category-icon">
                                                    <i class="bi bi-tag"></i>
                                                </div>
                                                <div class="category-info">
                                                    <div class="category-name">iPhone 14 Series</div>
                                                    <div class="category-meta">
                                                        <span class="badge bg-primary">28 s·∫£n ph·∫©m</span>
                                                        <span class="badge bg-success">Hi·ªÉn th·ªã</span>
                                                    </div>
                                                </div>
                                                <div class="category-actions">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(4)" title="Th√™m danh m·ª•c con">
                                                        <i class="bi bi-plus-circle"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-success" onclick="editCategory(4)" title="S·ª≠a">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(4)" title="X√≥a">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="category-item" data-category-id="5">
                                    <div class="category-content">
                                        <button class="category-toggle" onclick="toggleCategory(this)">
                                            <i class="bi bi-chevron-right"></i>
                                        </button>
                                        <div class="category-icon">
                                            <i class="bi bi-phone"></i>
                                        </div>
                                        <div class="category-info">
                                            <div class="category-name">Samsung</div>
                                            <div class="category-meta">
                                                <span class="badge bg-primary">67 s·∫£n ph·∫©m</span>
                                                <span class="badge bg-success">Hi·ªÉn th·ªã</span>
                                            </div>
                                        </div>
                                        <div class="category-actions">
                                            <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(5)" title="Th√™m danh m·ª•c con">
                                                <i class="bi bi-plus-circle"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-success" onclick="editCategory(5)" title="S·ª≠a">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(5)" title="X√≥a">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="category-item" data-category-id="6">
                                    <div class="category-content">
                                        <span class="category-toggle invisible"></span>
                                        <div class="category-icon">
                                            <i class="bi bi-headphones"></i>
                                        </div>
                                        <div class="category-info">
                                            <div class="category-name">Ph·ª• ki·ªán ƒëi·ªán tho·∫°i</div>
                                            <div class="category-meta">
                                                <span class="badge bg-primary">89 s·∫£n ph·∫©m</span>
                                                <span class="badge bg-success">Hi·ªÉn th·ªã</span>
                                            </div>
                                        </div>
                                        <div class="category-actions">
                                            <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(6)" title="Th√™m danh m·ª•c con">
                                                <i class="bi bi-plus-circle"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-success" onclick="editCategory(6)" title="S·ª≠a">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(6)" title="X√≥a">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- More Categories -->
                        <div class="category-item" data-category-id="7">
                            <div class="category-content">
                                <button class="category-toggle" onclick="toggleCategory(this)">
                                    <i class="bi bi-chevron-right"></i>
                                </button>
                                <div class="category-icon">
                                    <i class="bi bi-laptop-fill"></i>
                                </div>
                                <div class="category-info">
                                    <div class="category-name">Laptop</div>
                                    <div class="category-meta">
                                        <span class="badge bg-primary">156 s·∫£n ph·∫©m</span>
                                        <span class="badge bg-success">Hi·ªÉn th·ªã</span>
                                    </div>
                                </div>
                                <div class="category-actions">
                                    <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(7)" title="Th√™m danh m·ª•c con">
                                        <i class="bi bi-plus-circle"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success" onclick="editCategory(7)" title="S·ª≠a">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(7)" title="X√≥a">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="category-item" data-category-id="8">
                            <div class="category-content">
                                <button class="category-toggle" onclick="toggleCategory(this)">
                                    <i class="bi bi-chevron-right"></i>
                                </button>
                                <div class="category-icon">
                                    <i class="bi bi-tablet-fill"></i>
                                </div>
                                <div class="category-info">
                                    <div class="category-name">Tablet</div>
                                    <div class="category-meta">
                                        <span class="badge bg-primary">78 s·∫£n ph·∫©m</span>
                                        <span class="badge bg-success">Hi·ªÉn th·ªã</span>
                                    </div>
                                </div>
                                <div class="category-actions">
                                    <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(8)" title="Th√™m danh m·ª•c con">
                                        <i class="bi bi-plus-circle"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success" onclick="editCategory(8)" title="S·ª≠a">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(8)" title="X√≥a">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="category-item" data-category-id="9">
                            <div class="category-content">
                                <span class="category-toggle invisible"></span>
                                <div class="category-icon">
                                    <i class="bi bi-smartwatch"></i>
                                </div>
                                <div class="category-info">
                                    <div class="category-name">ƒê·ªìng h·ªì th√¥ng minh</div>
                                    <div class="category-meta">
                                        <span class="badge bg-primary">34 s·∫£n ph·∫©m</span>
                                        <span class="badge bg-warning text-dark">·∫®n</span>
                                    </div>
                                </div>
                                <div class="category-actions">
                                    <button class="btn btn-sm btn-outline-primary" onclick="addSubCategory(9)" title="Th√™m danh m·ª•c con">
                                        <i class="bi bi-plus-circle"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success" onclick="editCategory(9)" title="S·ª≠a">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteCategory(9)" title="X√≥a">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Category Stats & Quick Actions -->
            <div class="col-lg-4">
                <!-- Stats -->
                <div class="chart-container mb-4 fade-in-up" style="animation-delay: 0.1s;">
                    <h5 class="widget-title">
                        <i class="bi bi-bar-chart-fill"></i>
                        Th·ªëng k√™ danh m·ª•c
                    </h5>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon bg-primary">
                                <i class="bi bi-folder"></i>
                            </div>
                            <div class="stat-details">
                                <div class="stat-value">24</div>
                                <div class="stat-label">T·ªïng danh m·ª•c</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon bg-success">
                                <i class="bi bi-eye"></i>
                            </div>
                            <div class="stat-details">
                                <div class="stat-value">21</div>
                                <div class="stat-label">ƒêang hi·ªÉn th·ªã</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon bg-warning">
                                <i class="bi bi-eye-slash"></i>
                            </div>
                            <div class="stat-details">
                                <div class="stat-value">3</div>
                                <div class="stat-label">ƒêang ·∫©n</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon bg-info">
                                <i class="bi bi-box-seam"></i>
                            </div>
                            <div class="stat-details">
                                <div class="stat-value">856</div>
                                <div class="stat-label">T·ªïng s·∫£n ph·∫©m</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Categories -->
                <div class="chart-container fade-in-up" style="animation-delay: 0.2s;">
                    <h5 class="widget-title">
                        <i class="bi bi-trophy-fill"></i>
                        Danh m·ª•c b√°n ch·∫°y
                    </h5>
                    <div class="top-categories-list">
                        <div class="top-category-item">
                            <div class="rank-badge">1</div>
                            <div class="category-icon-small">
                                <i class="bi bi-phone-fill"></i>
                            </div>
                            <div class="category-details">
                                <div class="category-name-small">ƒêi·ªán tho·∫°i</div>
                                <div class="category-stats-small">245 s·∫£n ph·∫©m ¬∑ 2.450 ƒë∆°n</div>
                            </div>
                            <div class="category-revenue">
                                <strong>850M‚Ç´</strong>
                            </div>
                        </div>

                        <div class="top-category-item">
                            <div class="rank-badge rank-2">2</div>
                            <div class="category-icon-small">
                                <i class="bi bi-laptop-fill"></i>
                            </div>
                            <div class="category-details">
                                <div class="category-name-small">Laptop</div>
                                <div class="category-stats-small">156 s·∫£n ph·∫©m ¬∑ 1.892 ƒë∆°n</div>
                            </div>
                            <div class="category-revenue">
                                <strong>720M‚Ç´</strong>
                            </div>
                        </div>

                        <div class="top-category-item">
                            <div class="rank-badge rank-3">3</div>
                            <div class="category-icon-small">
                                <i class="bi bi-tablet-fill"></i>
                            </div>
                            <div class="category-details">
                                <div class="category-name-small">Tablet</div>
                                <div class="category-stats-small">78 s·∫£n ph·∫©m ¬∑ 1.234 ƒë∆°n</div>
                            </div>
                            <div class="category-revenue">
                                <strong>520M‚Ç´</strong>
                            </div>
                        </div>

                        <div class="top-category-item">
                            <div class="rank-badge rank-other">4</div>
                            <div class="category-icon-small">
                                <i class="bi bi-headphones"></i>
                            </div>
                            <div class="category-details">
                                <div class="category-name-small">Ph·ª• ki·ªán</div>
                                <div class="category-stats-small">234 s·∫£n ph·∫©m ¬∑ 987 ƒë∆°n</div>
                            </div>
                            <div class="category-revenue">
                                <strong>180M‚Ç´</strong>
                            </div>
                        </div>

                        <div class="top-category-item">
                            <div class="rank-badge rank-other">5</div>
                            <div class="category-icon-small">
                                <i class="bi bi-smartwatch"></i>
                            </div>
                            <div class="category-details">
                                <div class="category-name-small">ƒê·ªìng h·ªì</div>
                                <div class="category-stats-small">34 s·∫£n ph·∫©m ¬∑ 456 ƒë∆°n</div>
                            </div>
                            <div class="category-revenue">
                                <strong>95M‚Ç´</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Category Modal -->
<div class="modal fade" id="categoryModal" tabindex="-1" aria-labelledby="categoryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="categoryModalLabel">
                    <i class="bi bi-folder-plus"></i> Th√™m danh m·ª•c m·ªõi
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="categoryForm">
                    <div class="row g-3">
                        <div class="col-md-8">
                            <label class="form-label">T√™n danh m·ª•c <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="categoryName" required>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Icon</label>
                            <select class="form-select" id="categoryIcon">
                                <option value="bi-folder">üìÅ Folder</option>
                                <option value="bi-phone-fill">üì± Phone</option>
                                <option value="bi-laptop-fill">üíª Laptop</option>
                                <option value="bi-tablet-fill">üì± Tablet</option>
                                <option value="bi-headphones">üéß Headphones</option>
                                <option value="bi-smartwatch">‚åö Watch</option>
                                <option value="bi-camera-fill">üì∑ Camera</option>
                                <option value="bi-speaker-fill">üîä Speaker</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Danh m·ª•c cha</label>
                            <select class="form-select" id="parentCategory">
                                <option value="">-- Kh√¥ng c√≥ (Danh m·ª•c g·ªëc) --</option>
                                <option value="1">ƒêi·ªán tho·∫°i & Ph·ª• ki·ªán</option>
                                <option value="7">Laptop</option>
                                <option value="8">Tablet</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Tr·∫°ng th√°i</label>
                            <select class="form-select" id="categoryStatus">
                                <option value="active">Hi·ªÉn th·ªã</option>
                                <option value="hidden">·∫®n</option>
                            </select>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Slug (URL)</label>
                            <input type="text" class="form-control" id="categorySlug" placeholder="vd: dien-thoai-va-phu-kien">
                            <small class="text-muted">ƒê·ªÉ tr·ªëng ƒë·ªÉ t·ª± ƒë·ªông t·∫°o t·ª´ t√™n danh m·ª•c</small>
                        </div>

                        <div class="col-12">
                            <label class="form-label">M√¥ t·∫£</label>
                            <textarea class="form-control" id="categoryDescription" rows="3"></textarea>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Th·ª© t·ª± s·∫Øp x·∫øp</label>
                            <input type="number" class="form-control" id="categoryOrder" value="0">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Hi·ªÉn th·ªã trang ch·ªß</label>
                            <select class="form-select" id="showOnHome">
                                <option value="no">Kh√¥ng</option>
                                <option value="yes">C√≥</option>
                            </select>
                        </div>

                        <div class="col-12">
                            <label class="form-label">H√¨nh ·∫£nh danh m·ª•c</label>
                            <input type="file" class="form-control" id="categoryImage" accept="image/*">
                        </div>

                        <!-- SEO Section -->
                        <div class="col-12">
                            <hr>
                            <h6 class="mb-3">
                                <i class="bi bi-search"></i> T·ªëi ∆∞u SEO
                            </h6>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Meta Title</label>
                            <input type="text" class="form-control" id="metaTitle">
                        </div>

                        <div class="col-12">
                            <label class="form-label">Meta Description</label>
                            <textarea class="form-control" id="metaDescription" rows="2"></textarea>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Meta Keywords</label>
                            <input type="text" class="form-control" id="metaKeywords" placeholder="C√°ch nhau b·ªüi d·∫•u ph·∫©y">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                <button type="button" class="btn btn-primary" onclick="saveCategory()">
                    <i class="bi bi-save"></i> L∆∞u danh m·ª•c
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/javascript/Dashboard.js}"></script>
<script th:src="@{/javascript/Categories.js}"></script>

</body>
</html>